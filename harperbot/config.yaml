# SPDX-License-Identifier: MIT
# Copyright (c) 2026 harpertoken

---
# HarperBot Configuration
# This file configures HarperBot's analysis behavior.
# Modify these settings to customize the bot's performance and output.
# Customize the analysis focus and model

# Analysis focus: 'all', 'security', 'performance', 'quality'
# Options: 'all' for comprehensive review, 'security' for security issues only,
# 'performance' for optimization suggestions, 'quality' for code quality feedback
focus: all

# AI provider to use: 'gemini' or 'cerebras'
provider: cerebras

# Gemini model to use (if provider: gemini)
# Available options: 'gemini-1.5-flash', 'gemini-1.5-pro', 'gemini-2.0-flash',
# 'gemini-2.5-flash', 'gemini-2.5-pro'
# Recommendations: 'gemini-2.0-flash-exp' for fast, cost-effective analysis;
# 'gemini-2.5-pro-exp' for higher quality but slower responses
# See https://ai.google.dev/models/gemini for the full list and latest models
model: gemini-2.5-flash

# Cerebras model to use (if provider: cerebras)
# Available options: 'gpt-oss-120b', etc.
cerebras_model: gpt-oss-120b

# Maximum diff length to analyze (characters)
# Limits the size of diff content sent to AI.
# Larger values provide more context but may hit token limits or increase costs
max_diff_length: 4000

# Temperature for generation (0.0 to 1.0)
# Controls randomness in AI responses.
# Lower values (0.0-0.3) for consistent, focused analysis; higher for more creative suggestions.
temperature: 0.2

# Maximum output tokens
# Maximum length of AI response in tokens. Higher allows more detailed analysis but increases cost.
max_output_tokens: 4096

# Safety settings for AI content filtering
# Configure thresholds: BLOCK_NONE, BLOCK_ONLY_HIGH, BLOCK_MEDIUM_AND_ABOVE, BLOCK_LOW_AND_ABOVE
# See https://ai.google.dev/gemini-api/docs/safety-settings for details
safety_settings:
  - category: HARM_CATEGORY_HARASSMENT
    threshold: BLOCK_NONE
  - category: HARM_CATEGORY_HATE_SPEECH
    threshold: BLOCK_NONE
  - category: HARM_CATEGORY_SEXUALLY_EXPLICIT
    threshold: BLOCK_NONE
  - category: HARM_CATEGORY_DANGEROUS_CONTENT
    threshold: BLOCK_NONE

# Enable code authoring features
# When enabled, HarperBot can create commits, branches, and PRs with improvements
enable_authoring: false

# Auto-commit suggestions to PR branches
# Applies code suggestions directly to the PR's head branch
auto_commit_suggestions: false

# Create improvement PRs
# Generates new PRs with additional improvements beyond the original changes
create_improvement_prs: false

# Branch naming pattern for improvement PRs
# {timestamp} and {pr_number} will be replaced with actual values
improvement_branch_pattern: "harperbot-improvements-{timestamp}"

# AI analysis prompt template
# Customize the prompt to change how HarperBot analyzes code
prompt: |
  Analyze the following code changes for improvements.
  Focus on code quality, best practices, performance, and correctness.

  Changed files:
  {files_list}

  Diff:
  {diff_content}

  Use the check_python_syntax tool if you need to verify Python code syntax.

  Provide specific code suggestions as diff blocks in the format:
  ```diff
  file_path
  @@ -line_start,count +line_start,count @@
  - old code
  + new code
  ```

  Only suggest changes to lines that are modified in the diff.
  Suggestions should be actionable and include accurate line numbers from the diff.
